---
title: 并查集
date: 2023-01-10T16:35:53Z
lastmod: 2023-01-10T16:36:59Z
---

# 并查集

# 连通性问题

## 题目描述

关系R具有对称性和传递性。数对p q表示pRq,p和q是0或自然数,p不等于q。  
要求写一个程序将数对序列进行过滤，如果一个数对可以通过前面数对的传递性得到，则将其滤去。例如：  

​![image](assets/image-20230110163623-nwtn5gs.png)​

其中数对2 9和0 2可由之前数对的连通关系得到，故不做输出。

## 输入描述

输入共有m行(0<=m<=1000000),每行一个数对，数对的数字之间以1个空格分隔；数对的数字为0或n=100000以内的自然数。

## 输出描述

输出包含过滤之后的数对序列。每行输出一个数对，数对的数字之间以1个空格分隔。

## 输入样例

```
3 4
4 9
8 0
2 3
5 6
2 9
5 9
7 3
4 8
5 6
0 2
6 1
```

## 输出样例

```
3 4
4 9
8 0
2 3
5 6
5 9
7 3
4 8
6 1
```

‍

‍

# 家族查询

## 题目描述

某个家族人员过于庞大，要判断两个是否是亲戚，确实还很不容易，现在给出某个亲戚关系图，求任意给出的两个人是否具有亲戚关系。  
规定：x和y是亲戚，y和z是亲戚，那么x和z也是亲戚。如果x,y是亲戚，那么x的亲戚都是y的亲戚，y的亲戚也都是x的亲戚。（人数≤5000，询问亲戚关系次数≤5000）。

## 输入描述

第一行为数据组数T(T <= 20)  
对于每组数据，第一行有两个整数n、m(1 <= n, m <= 5000)，表示有n个人，编号1~n，其中存在m个亲戚关系  
接下来m行，每行有两个整数u、v(u != v, 1 <= u, v <= n)，表示u和v之间有亲戚关系  
然后是询问组数q(1 <= q <= 5000)  
接下来q行，每行有两个整数u、v(u != v, 1 <= u, v <= n)，询问u和v之间是否有亲戚关系

## 输出描述

对于每组数据，输出q行，每行为"Yes"或"No"，表示是否存在亲戚关系  
每组数据的输出用空行隔开

## 输入样例

2  
3 1  
2 3  
2  
1 2  
2 3  
4 2  
1 2  
1 4  
3  
1 2  
1 3  
2 4

## 输出样例

No  
Yes

Yes  
No  
Yes

‍

‍

# Connect components in undirected graph

## 题目描述

输入一个简单无向图，求出图中连通块的数目。

## 输入描述

输入的第一行包含两个整数n和m，n是图的顶点数，m是边数。1<=n<=1000，0<=m<=10000。  
以下m行，每行是一个数对v y，表示存在边(v,y)。顶点编号从1开始。

## 输出描述

单独一行输出连通块的数目。

## 输入样例

5 3  
1 2  
1 3  
2 4

## 输出样例

2

‍

‍
